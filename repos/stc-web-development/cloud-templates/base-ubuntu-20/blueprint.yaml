name: Base Ubuntu 20
version: 1

formatVersion: 1
inputs:
  machineName:
    type: string
    title: Server Name
resources:
  ubuntu:
    type: Cloud.vSphere.Machine
    properties:
      machineName: ${input.machineName}
      image: Ubuntu20
      flavor: small
      constraints:
        - tag: 'cloud:vsphere'
      networks:
        - network: '${resource.vsphere_network.id}'
          assignment: static
  vsphere_network:
    type: Cloud.vSphere.Network
    properties:
      networkType: existing
      constraints:
        - tag: 'net:vsphere'
